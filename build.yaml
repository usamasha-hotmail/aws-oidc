name: Github action to cjeck IAM role
on: [push]

env: 
  AWS_REGION: ${{ secrets.AWS_REGION }}
  IAMROLE_GIHUB: ${{ secrets.IAMROLE_GITHUB }}

jobs:
  runs-on: ubuntu-latest
  steps:
  - name: clone checkout
    uses: actions\checkout@v4

  - name: config AWS role
    uses: aws-actions/configure-aws-credentials@v4
    with: 
      role-to-asume: ${{env.IAMROLE_GIHUB}} 
      role-session-name: github-actions-federation
      aws-region: ${{ env.AWS_REGION }}
  - name: list buckets
    run: aws s3 ls    